<span style="color: white;">
    <script>
        // Only keep the synchronous script for displaying the name
        const username = localStorage.getItem('username') || 'Member';
        document.write(`<span>Welcome, ${username}!</span> | `);
    </script>
    <a href="#" id="logout-link">Logout</a> 
    <script>
        document.getElementById('logout-link').addEventListener('click', (e) => {
            e.preventDefault();
            
            // Clear client-side flags
            localStorage.removeItem('isUserLoggedIn');
            localStorage.removeItem('username');
            
            // Call the logout API to expire the HTTP-only cookie
            fetch('/api/logout', { method: 'POST' })
                .then(() => {
                    // After successfully expiring the cookie, redirect to the home page
                    // The componentLoader will now load the logged-out state
                    window.location.href = '/index.html'; 
                })
                .catch(error => {
                    console.error('Logout error:', error);
                    // Force redirect even on error for user experience
                    window.location.href = '/index.html';
                });
        });
    </script>
</span>